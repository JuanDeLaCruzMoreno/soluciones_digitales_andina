
<section class="cards-row">
  <div class="card">
    <div class="card-icon icon-1">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none"
           xmlns="http://www.w3.org/2000/svg" aria-hidden>
        <circle cx="12" cy="12" r="10" fill="rgba(255,255,255,0.6)" />
        <path d="M7 12h10" stroke="#ffffff" stroke-width="1.6" stroke-linecap="round" />
      </svg>
    </div>

    <div class="card-body">
      <div class="card-top">
        <h3 class="card-title">Total Servicios</h3>
      </div>
      <div class="card-value">{{ totalServicios }}</div>
      <div class="card-sub">servicios registrados</div>
    </div>
  </div>

  <div class="card">
    <div class="card-icon icon-2">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none"
           xmlns="http://www.w3.org/2000/svg" aria-hidden>
        <circle cx="12" cy="12" r="10" fill="rgba(255,255,255,0.6)" />
        <path d="M7 12h10" stroke="#ffffff" stroke-width="1.6" stroke-linecap="round" />
        <path d="M12 7v10" stroke="#ffffff" stroke-width="1.6" stroke-linecap="round" />
      </svg>
    </div>

    <div class="card-body">
      <div class="card-top">
        <h3 class="card-title">Servicios Activos</h3>
      </div>
      <div class="card-value">{{ serviciosActivos }}</div>
      <div class="card-sub">disponibles para clientes</div>
    </div>
  </div>

  <div class="card">
    <div class="card-icon icon-3">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none"
           xmlns="http://www.w3.org/2000/svg" aria-hidden>
        <circle cx="12" cy="12" r="10" fill="rgba(255,255,255,0.6)" />
        <path d="M7 12h10" stroke="#ffffff" stroke-width="1.6" stroke-linecap="round" />
      </svg>
    </div>

    <div class="card-body">
      <div class="card-top">
        <h3 class="card-title">Servicios Nuevos</h3>
      </div>
      <div class="card-value">{{ serviciosNuevos }}</div>
      <div class="card-sub">marcados como nuevos</div>
    </div>
  </div>
</section>



<div class="crud-container">
  <header class="crud-header">
    <h2>Administrar servicios</h2>
    <div class="actions">
      <button class="btn primary" (click)="addItem()">+ Nuevo</button>
      <button class="btn" (click)="resetData()" title="Restaurar datos por defecto">üîÑ Restaurar</button>
    </div>
  </header>

  <table class="crud-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Descripci√≥n</th>
        <th>Precio</th>
        <th>Nuevo</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let servicio of servicios" [class.inactive]="servicio.activo === false">
        <td>{{ servicio.id }}</td>
        <td>
          <ng-container *ngIf="editingId !== servicio.id; else editNombre">{{ servicio.nombre }}</ng-container>
          <ng-template #editNombre>
            <input type="text" [(ngModel)]="editModel.nombre" />
          </ng-template>
        </td>
        <td>
          <ng-container *ngIf="editingId !== servicio.id; else editDescripcion">{{ servicio.descripcion }}</ng-container>
          <ng-template #editDescripcion>
            <textarea [(ngModel)]="editModel.descripcion" rows="2"></textarea>
          </ng-template>
        </td>
        <td>
          <ng-container *ngIf="editingId !== servicio.id; else editPrecio">
            {{ servicio.precio | currency:'COP':'symbol':'1.0-0' }}
          </ng-container>
          <ng-template #editPrecio>
            <input type="number" [(ngModel)]="editModel.precio" />
          </ng-template>
        </td>
        <td>
          <ng-container *ngIf="editingId !== servicio.id; else editNuevo">
            {{ servicio.nuevo ? '‚úÖ' : '‚ùå' }}
          </ng-container>
          <ng-template #editNuevo>
            <select [(ngModel)]="editModel.nuevo">
              <option [ngValue]="true">S√≠</option>
              <option [ngValue]="false">No</option>
            </select>
          </ng-template>
        </td>
        <td>
          <ng-container *ngIf="editingId !== servicio.id; else editActivo">
            <span [class.badge-active]="servicio.activo !== false" [class.badge-inactive]="servicio.activo === false">
              {{ servicio.activo === false ? 'Inactivo' : 'Activo' }}
            </span>
          </ng-container>
          <ng-template #editActivo>
            <select [(ngModel)]="editModel.activo">
              <option [ngValue]="true">Activo</option>
              <option [ngValue]="false">Inactivo</option>
            </select>
          </ng-template>
        </td>
        <td class="actions-col">
          <ng-container *ngIf="editingId !== servicio.id; else editButtons">
            <button class="btn edit" (click)="startEdit(servicio)">Editar</button>
            <button class="btn danger" (click)="deleteItem(servicio.id)">Eliminar</button>
          </ng-container>
          <ng-template #editButtons>
            <button class="btn primary" (click)="saveEdit()">Guardar</button>
            <button class="btn" (click)="cancelEdit()">Cancelar</button>
          </ng-template>
        </td>
      </tr>
      <tr *ngIf="servicios.length === 0">
        <td colspan="7" class="empty">No hay servicios.</td>
      </tr>
    </tbody>
  </table>
</div>
